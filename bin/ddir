#!/usr/bin/env ruby
$LOAD_PATH.unshift File.expand_path('../lib', __dir__)
require 'ddir'

example_dir     = File.expand_path '../example', __dir__
input_filename  = File.join example_dir, 'input.ddir'
output_filename = File.join example_dir, 'output.rb'

generated = Ddir.generate Ddir.parse errstream: $stderr, body: File.read(input_filename)
File.write output_filename, generated
$stdout.puts generated
system 'ruby', '-c', output_filename
