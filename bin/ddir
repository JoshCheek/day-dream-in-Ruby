#!/usr/bin/env ruby
root_dir     = File.expand_path('..', __dir__)
lib_dir      = File.join root_dir, 'lib'
grammar_file = File.join lib_dir, 'ddir/ddir.treetop'

$LOAD_PATH.unshift lib_dir
require 'ddir'

parse_opts = {
  errstream: $stderr,
  body:      <<-BODY.gsub(/^\s*/, ''),
    x + x
    x - @y
    x - @y
    x - @y
    x - @y
    abc.def.ghi
  BODY
}

# doubt I'll ever get to this point, but w/e!
if ARGV.include? 'zomg'
  parse_opts[:body] = File.read 'zomg'
end

p Ddir.parse parse_opts
